# Copyright The Linux Foundation and each contributor to LFX.
# SPDX-License-Identifier: MIT
---
# image is the configuration for the container images
image:
  # repository is the container image repository
  repository: ghcr.io/linuxfoundation/lfx-v2-meeting-service/meeting-api
  # tag is the container image tag (overrides appVersion from Chart.yaml)
  tag: ""
  # pullPolicy is the image pull policy
  pullPolicy: IfNotPresent

# app is the configuration for the application
app:
  # audience is the JWT audience required for this authentication with this app
  audience: lfx-v2-meeting-service
  # skipEtagValidation is a boolean to determine if the etag validation should be skipped
  # (only use for local development)
  skipEtagValidation: false
  # use_oidc_contextualizer is a boolean to determine if the OIDC contextualizer should be used
  use_oidc_contextualizer: true

  environment:
    # NATS_URL is required
    NATS_URL:
      value: nats://lfx-platform-nats.lfx.svc.cluster.local:4222
    # LOG_LEVEL is optional
    LOG_LEVEL:
      value: info
    # LOG_ADD_SOURCE is optional
    LOG_ADD_SOURCE:
      value: true
    # JWKS_URL is required unless JWT_AUTH_DISABLED_MOCK_LOCAL_PRINCIPAL is set to a non-empty value
    JWKS_URL:
      value: http://lfx-platform-heimdall.lfx.svc.cluster.local:4457/.well-known/jwks
    # JWT_AUDIENCE is required
    JWT_AUDIENCE:
      value: lfx-v2-meeting-service
    # SKIP_ETAG_VALIDATION is optional
    SKIP_ETAG_VALIDATION:
      value: "false"
    # JWT_AUTH_DISABLED_MOCK_LOCAL_PRINCIPAL is optional
    JWT_AUTH_DISABLED_MOCK_LOCAL_PRINCIPAL:
      value: ''
    # EMAIL_ENABLED is optional
    EMAIL_ENABLED:
      value: "true"
    # SMTP_HOST is optional
    SMTP_HOST:
      value: lfx-platform-mailpit-smtp.lfx.svc.cluster.local
    # SMTP_PORT is optional
    SMTP_PORT:
      value: "25"
    # SMTP_FROM is optional
    SMTP_FROM:
      value: noreply@lfx.linuxfoundation.org
    # SMTP_USERNAME is optional
    SMTP_USERNAME:
      value: null
    # SMTP_PASSWORD is optional
    SMTP_PASSWORD:
      value: null
    # ZOOM_ACCOUNT_ID is optional
    ZOOM_ACCOUNT_ID:
      value: null
    # ZOOM_CLIENT_ID is optional
    ZOOM_CLIENT_ID:
      value: null
    # ZOOM_CLIENT_SECRET is optional
    ZOOM_CLIENT_SECRET:
      value: null
    # ZOOM_WEBHOOK_SECRET_TOKEN is optional
    ZOOM_WEBHOOK_SECRET_TOKEN:
      value: null
    # LFX_ENVIRONMENT is optional (dev, staging, prod) - defaults to prod if not set
    LFX_ENVIRONMENT:
      value: prod

# traefik is the configuration for Traefik Gateway API routing
traefik:
  # gateway specifies the platform Gateway to attach to
  gateway:
    name: lfx-platform-gateway
    namespace: lfx

# lfx is the configuration for LFX platform
lfx:
  # domain is the base domain for routing
  domain: k8s.orb.local
  # namespace is the target namespace for deployment
  namespace: lfx

# service is the configuration for the Kubernetes service
service:
  # port is the service port
  port: 8080

# serviceAccount is the configuration for the Kubernetes service account
serviceAccount:
  # create specifies whether a service account should be created
  create: true
  # name is the name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""
  # annotations to add to the service account
  annotations: {}
  # automountServiceAccountToken is a boolean to determine if the service account token should be automatically mounted
  automountServiceAccountToken: true

# nats is the configuration for the NATS server
nats:

  # kv_bucket_meetings is the configuration for the KV bucket for storing meeting base information
  kv_bucket_meetings:
    # creation is a boolean to determine if the KV bucket should be created via the helm chart.
    # set it to false if you want to use an existing KV bucket.
    creation: true
    # keep is a boolean to determine if the KV bucket should be preserved during helm uninstall
    # set it to false if you want the bucket to be deleted when the chart is uninstalled
    keep: true
    # name is the name of the KV bucket for storing meeting base information
    name: meetings
    # history is the number of history entries to keep for the KV bucket
    history: 20
    # storage is the storage type for the KV bucket
    storage: file
    # maxValueSize is the maximum size of a value in the KV bucket
    maxValueSize: 10485760  # 10MB
    # maxBytes is the maximum number of bytes in the KV bucket
    maxBytes: 1073741824  # 1GB
    # compression is a boolean to determine if the KV bucket should be compressed
    compression: true

  # kv_bucket_meeting_settings is the configuration for the KV bucket for storing meeting settings
  kv_bucket_meeting_settings:
    # creation is a boolean to determine if the KV bucket should be created via the helm chart.
    # set it to false if you want to use an existing KV bucket.
    creation: true
    # keep is a boolean to determine if the KV bucket should be preserved during helm uninstall
    # set it to false if you want the bucket to be deleted when the chart is uninstalled
    keep: true
    # name is the name of the KV bucket for storing meeting settings
    name: meeting-settings
    # history is the number of history entries to keep for the KV bucket
    history: 20
    # storage is the storage type for the KV bucket
    storage: file
    # maxValueSize is the maximum size of a value in the KV bucket
    maxValueSize: 10485760  # 10MB
    # maxBytes is the maximum number of bytes in the KV bucket
    maxBytes: 1073741824  # 1GB
    # compression is a boolean to determine if the KV bucket should be compressed
    compression: true

  # kv_bucket_meeting_registrants is the configuration for the KV bucket for storing meeting registrants
  kv_bucket_meeting_registrants:
    # creation is a boolean to determine if the KV bucket should be created via the helm chart.
    # set it to false if you want to use an existing KV bucket.
    creation: true
    # keep is a boolean to determine if the KV bucket should be preserved during helm uninstall
    # set it to false if you want the bucket to be deleted when the chart is uninstalled
    keep: true
    # name is the name of the KV bucket for storing meeting registrants
    name: meeting-registrants
    # history is the number of history entries to keep for the KV bucket
    history: 20
    # storage is the storage type for the KV bucket
    storage: file
    # maxValueSize is the maximum size of a value in the KV bucket
    maxValueSize: 10485760  # 10MB
    # maxBytes is the maximum number of bytes in the KV bucket
    maxBytes: 1073741824  # 1GB
    # compression is a boolean to determine if the KV bucket should be compressed
    compression: true

  # kv_bucket_meeting_rsvp is the configuration for the KV bucket for storing meeting RSVP responses
  kv_bucket_meeting_rsvp:
    # creation is a boolean to determine if the KV bucket should be created via the helm chart.
    # set it to false if you want to use an existing KV bucket.
    creation: true
    # keep is a boolean to determine if the KV bucket should be preserved during helm uninstall
    # set it to false if you want the bucket to be deleted when the chart is uninstalled
    keep: true
    # name is the name of the KV bucket for storing meeting RSVP responses
    name: meeting-rsvp
    # history is the number of history entries to keep for the KV bucket
    history: 20
    # storage is the storage type for the KV bucket
    storage: file
    # maxValueSize is the maximum size of a value in the KV bucket
    maxValueSize: 10485760  # 10MB
    # maxBytes is the maximum number of bytes in the KV bucket
    maxBytes: 1073741824  # 1GB
    # compression is a boolean to determine if the KV bucket should be compressed
    compression: true

  # kv_bucket_past_meetings is the configuration for the KV bucket for storing past meetings
  kv_bucket_past_meetings:
    # creation is a boolean to determine if the KV bucket should be created via the helm chart.
    # set it to false if you want to use an existing KV bucket.
    creation: true
    # keep is a boolean to determine if the KV bucket should be preserved during helm uninstall
    # set it to false if you want the bucket to be deleted when the chart is uninstalled
    keep: true
    # name is the name of the KV bucket for storing past meetings
    name: past-meetings
    # history is the number of history entries to keep for the KV bucket
    history: 20
    # storage is the storage type for the KV bucket
    storage: file
    # maxValueSize is the maximum size of a value in the KV bucket
    maxValueSize: 10485760  # 10MB
    # maxBytes is the maximum number of bytes in the KV bucket
    maxBytes: 5368709120  # 5GB
    # compression is a boolean to determine if the KV bucket should be compressed
    compression: true

  # kv_bucket_past_meeting_participants is the configuration for the KV bucket for storing past meeting participants
  kv_bucket_past_meeting_participants:
    # creation is a boolean to determine if the KV bucket should be created via the helm chart.
    # set it to false if you want to use an existing KV bucket.
    creation: true
    # keep is a boolean to determine if the KV bucket should be preserved during helm uninstall
    # set it to false if you want the bucket to be deleted when the chart is uninstalled
    keep: true
    # name is the name of the KV bucket for storing past meeting participants
    name: past-meeting-participants
    # history is the number of history entries to keep for the KV bucket
    history: 20
    # storage is the storage type for the KV bucket
    storage: file
    # maxValueSize is the maximum size of a value in the KV bucket
    maxValueSize: 10485760  # 10MB
    # maxBytes is the maximum number of bytes in the KV bucket
    maxBytes: 5368709120  # 5GB
    # compression is a boolean to determine if the KV bucket should be compressed
    compression: true

  # kv_bucket_past_meeting_recordings is the configuration for the KV bucket for storing past meeting recordings
  kv_bucket_past_meeting_recordings:
    # creation is a boolean to determine if the KV bucket should be created via the helm chart.
    # set it to false if you want to use an existing KV bucket.
    creation: true
    # keep is a boolean to determine if the KV bucket should be preserved during helm uninstall
    # set it to false if you want the bucket to be deleted when the chart is uninstalled
    keep: true
    # name is the name of the KV bucket for storing past meeting recordings
    name: past-meeting-recordings
    # history is the number of history entries to keep for the KV bucket
    history: 20
    # storage is the storage type for the KV bucket
    storage: file
    # maxValueSize is the maximum size of a value in the KV bucket
    maxValueSize: 10485760  # 10MB
    # maxBytes is the maximum number of bytes in the KV bucket
    maxBytes: 10737418240  # 10GB
    # compression is a boolean to determine if the KV bucket should be compressed
    compression: true

  # kv_bucket_past_meeting_transcripts is the configuration for the KV bucket for storing past meeting transcripts
  kv_bucket_past_meeting_transcripts:
    # creation is a boolean to determine if the KV bucket should be created via the helm chart.
    # set it to false if you want to use an existing KV bucket.
    creation: true
    # keep is a boolean to determine if the KV bucket should be preserved during helm uninstall
    # set it to false if you want the bucket to be deleted when the chart is uninstalled
    keep: true
    # name is the name of the KV bucket for storing past meeting transcripts
    name: past-meeting-transcripts
    # history is the number of history entries to keep for the KV bucket
    history: 20
    # storage is the storage type for the KV bucket
    storage: file
    # maxValueSize is the maximum size of a value in the KV bucket
    maxValueSize: 10485760  # 10MB
    # maxBytes is the maximum number of bytes in the KV bucket
    maxBytes: 5368709120  # 5GB
    # compression is a boolean to determine if the KV bucket should be compressed
    compression: true

  # kv_bucket_past_meeting_summaries is the configuration for the KV bucket for storing past meeting summaries
  kv_bucket_past_meeting_summaries:
    # creation is a boolean to determine if the KV bucket should be created via the helm chart.
    # set it to false if you want to use an existing KV bucket.
    creation: true
    # keep is a boolean to determine if the KV bucket should be preserved during helm uninstall
    # set it to false if you want the bucket to be deleted when the chart is uninstalled
    keep: true
    # name is the name of the KV bucket for storing past meeting summaries
    name: past-meeting-summaries
    # history is the number of history entries to keep for the KV bucket
    history: 20
    # storage is the storage type for the KV bucket
    storage: file
    # maxValueSize is the maximum size of a value in the KV bucket
    maxValueSize: 10485760  # 10MB
    # maxBytes is the maximum number of bytes in the KV bucket
    maxBytes: 1073741824  # 1GB
    # compression is a boolean to determine if the KV bucket should be compressed
    compression: true

  # kv_bucket_meeting_attachments_metadata is the configuration for the KV bucket for storing meeting attachment metadata
  kv_bucket_meeting_attachments_metadata:
    # creation is a boolean to determine if the KV bucket should be created via the helm chart.
    # set it to false if you want to use an existing KV bucket.
    creation: true
    # keep is a boolean to determine if the KV bucket should be preserved during helm uninstall
    # set it to false if you want the bucket to be deleted when the chart is uninstalled
    keep: true
    # name is the name of the KV bucket for storing meeting attachment metadata
    name: meeting-attachments-metadata
    # history is the number of history entries to keep for the KV bucket
    history: 20
    # storage is the storage type for the KV bucket
    storage: file
    # maxValueSize is the maximum size of a value in the KV bucket
    maxValueSize: 10485760  # 10MB (for attachment metadata JSON)
    # maxBytes is the maximum number of bytes in the KV bucket
    maxBytes: 1073741824  # 1GB
    # compression is a boolean to determine if the KV bucket should be compressed
    compression: true

  # object_store_meeting_attachments is the configuration for the Object Store for storing meeting attachments
  object_store_meeting_attachments:
    # creation is a boolean to determine if the Object Store should be created via the helm chart.
    # set it to false if you want to use an existing Object Store.
    creation: true
    # keep is a boolean to determine if the Object Store should be preserved during helm uninstall
    # set it to false if you want the store to be deleted when the chart is uninstalled
    keep: true
    # name is the name of the Object Store for storing meeting attachments
    name: meeting-attachments
    # storage is the storage type for the Object Store
    storage: file
    # maxBytes is the maximum number of bytes in the Object Store
    maxBytes: 1073741824  # 1GB

# openfga is the configuration for the OpenFGA server
openfga:
  # enabled is a boolean to determine if the OpenFGA server should be enabled for authorization
  # Note: If it is disabled, then the meeting service will allow all requests
  # (Disabling OpenFGA should only be used for local development).
  enabled: true

# heimdall is the configuration for the heimdall middleware
heimdall:
  enabled: true
  url: http://lfx-platform-heimdall.lfx.svc.cluster.local:4456
  add_middleware: false
